syntax = "proto3";
package hyperlane.warp.v1;

option go_package = "github.com/bcp-innovations/hyperlane-cosmos/x/warp/types";

import "cosmos/msg/v1/msg.proto";
import "gogoproto/gogo.proto";
import "amino/amino.proto";
import "cosmos_proto/cosmos.proto";
import "hyperlane/warp/v1/types.proto";

// Msg defines the module Msg service.
service Msg {
  option (cosmos.msg.v1.service) = true;

  // CreateCollateralToken ...
  rpc CreateCollateralToken(MsgCreateCollateralToken)
      returns (MsgCreateCollateralTokenResponse);

  // CreateSyntheticToken ...
  rpc CreateSyntheticToken(MsgCreateSyntheticToken)
      returns (MsgCreateSyntheticTokenResponse);

  // EnrollRemoteRouter ...
  rpc EnrollRemoteRouter(MsgEnrollRemoteRouter)
      returns (MsgEnrollRemoteRouterResponse);

  // SetRemoteRouter ...
  rpc SetRemoteRouter(MsgSetRemoteRouter) returns (MsgSetRemoteRouterResponse);

  // UnrollRemoteRouter ...
  rpc UnrollRemoteRouter(MsgUnrollRemoteRouter)
      returns (MsgUnrollRemoteRouterResponse);

  // SetInterchainSecurityModule ...
  rpc SetInterchainSecurityModule(MsgSetInterchainSecurityModule)
      returns (MsgSetInterchainSecurityModuleResponse);

  // RemoteTransfer ...
  rpc RemoteTransfer(MsgRemoteTransfer) returns (MsgRemoteTransferResponse);
}

// MsgCreateCollateralToken ...
message MsgCreateCollateralToken {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "hyperlane/warp/MsgCreateCollateralToken";

  // owner is the message sender.
  string owner = 1 [ (cosmos_proto.scalar) = "cosmos.AddressString" ];

  string origin_mailbox = 2;
  string origin_denom = 3;
}

// MsgCreateCollateralTokenResponse ...
message MsgCreateCollateralTokenResponse { string id = 1; }

// MsgCreateSyntheticToken ...
message MsgCreateSyntheticToken {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "hyperlane/warp/MsgCreateSyntheticToken";

  // owner is the message sender.
  string owner = 1 [ (cosmos_proto.scalar) = "cosmos.AddressString" ];

  string origin_mailbox = 2;

  // TODO should we add some metadata? e.g. decimals, denom
}

// MsgCreateSyntheticTokenResponse ...
message MsgCreateSyntheticTokenResponse { string id = 1; }

// MsgEnrollRemoteRouter ...
message MsgEnrollRemoteRouter {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "hyperlane/warp/MsgEnrollRemoteRouter";

  // owner is the message sender.
  string owner = 1 [ (cosmos_proto.scalar) = "cosmos.AddressString" ];
  string token_id = 2;

  RemoteRouter remote_router = 3;
}

// MsgEnrollRemoteRouterResponse ...
message MsgEnrollRemoteRouterResponse {}

// MsgSetRemoteRouter ...
message MsgSetRemoteRouter {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "hyperlane/warp/MsgSetRemoteRouter";

  // owner is the message sender.
  string owner = 1 [ (cosmos_proto.scalar) = "cosmos.AddressString" ];
  string token_id = 2;

  RemoteRouter remote_router = 3;
}

// MsgSetRemoteRouterResponse ...
message MsgSetRemoteRouterResponse {}

// MsgUnrollRemoteRouter ...
message MsgUnrollRemoteRouter {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "hyperlane/warp/MsgUnrollRemoteRouter";

  // owner is the message sender.
  string owner = 1 [ (cosmos_proto.scalar) = "cosmos.AddressString" ];
  string token_id = 2;
  uint32 receiver_domain = 3;
}

// MsgUnrollRemoteRouterResponse ...
message MsgUnrollRemoteRouterResponse {}

// MsgSetInterchainSecurityModule ...
message MsgSetInterchainSecurityModule {
  option (cosmos.msg.v1.signer) = "owner";
  option (amino.name) = "hyperlane/warp/MsgSetInterchainSecurityModule";

  // owner is the message sender.
  string owner = 1 [ (cosmos_proto.scalar) = "cosmos.AddressString" ];
  string token_id = 2;
  string ism_id = 3;
}

// MsgSetInterchainSecurityModuleResponse ...
message MsgSetInterchainSecurityModuleResponse {}

// MsgRemoteTransfer ...
message MsgRemoteTransfer {
  option (cosmos.msg.v1.signer) = "sender";
  option (amino.name) = "hyperlane/warp/MsgRemoteTransfer";

  string sender = 1 [ (cosmos_proto.scalar) = "cosmos.AddressString" ];
  string token_id = 2;
  uint32 destination_domain = 3;
  string recipient = 4;
  string amount = 5 [
    (cosmos_proto.scalar) = "cosmos.Int",
    (gogoproto.customtype) = "cosmossdk.io/math.Int",
    (gogoproto.nullable) = false,
    (amino.dont_omitempty) = true
  ];

  // IGP
  string igp_id = 6;
  string gas_limit = 7 [
    (gogoproto.customtype) = "cosmossdk.io/math.Int",
    (gogoproto.nullable) = false
  ];
  string max_fee = 8 [
    (gogoproto.customtype) = "cosmossdk.io/math.Int",
    (gogoproto.nullable) = false
  ];
}

// MsgRemoteTransferResponse ...
message MsgRemoteTransferResponse { string message_id = 1; }
